var amstramgramVideoPlayer=function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function s(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var a=[],n=!0,s=!1,i=void 0;try{for(var o,r=t[Symbol.iterator]();!(n=(o=r.next()).done)&&(a.push(o.value),!e||a.length!==e);n=!0);}catch(t){s=!0,i=t}finally{try{n||null==r.return||r.return()}finally{if(s)throw i}}return a}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o=window,r=document,l=o.PointerEvent?"pointer":o.TouchEvent?"touch":"mouse",u="touch"==l?"none":l+"enter",c="touch"==l?"none":l+"leave",m="touch"==l?"touchstart":l+"down",d="touch"==l?"touchend":l+"up",p=l+"move",v=o.navigator.userAgent.toLowerCase(),f=/ipad|iphone|ipod/i.test(v)&&!o.MSStream||/android/i.test(v);if("function"!=typeof Object.assign||!Array.from||!Array.prototype.includes||"function"!=typeof window.CustomEvent){var h=r.getElementsByTagName("script"),_=h[h.length-1].src.split("?")[0].split("/").slice(0,-1).join("/")+"/",b=r.createElement("script");b.async="false",b.src=_+"amstramgramVideoPlayerPolyfill.min.js",r.head.appendChild(b)}null==Element.prototype.getAttributeNames&&(Element.prototype.getAttributeNames=function(){for(var t=this.attributes,e=t.length,a=new Array(e),n=0;n<e;n++)a[n]=t[n].name;return a});var g,y,E=function(){try{var t="__storage_test__";return o.sessionStorage.setItem(t,t),o.sessionStorage.removeItem(t),o.sessionStorage}catch(t){return!1}}();if(E&&E.getItem("amst_timeWidth"))g=E.getItem("amst_timeWidth"),y=E.getItem("amst_longTimeWidth");else{var w=r.createElement("div"),T=r.createElement("div");w.classList.add("amst__measureTime"),w.innerHTML="<span>00:00<span>",T.classList.add("amst__measureTime"),T.innerHTML="<span>00:00:00<span>",r.body.appendChild(w),r.body.appendChild(T),g=w.offsetWidth+2,y=T.offsetWidth+2,r.body.removeChild(w),r.body.removeChild(T),E&&(E.setItem("amst_timeWidth",g),E.setItem("amst_longTimeWidth",y))}var L=r.createElement("style");L.appendChild(r.createTextNode("")),r.head.appendChild(L),L.sheet.insertRule(".amst__time>span{width:".concat(g,"px;"),0),L.sheet.insertRule(".amst__long .amst__time>span{width:".concat(y,"px;"),0);var k,x,A=!1;if(E&&null!=E.getItem("amst_fullscreenAPI")?A=JSON.parse(E.getItem("amst_fullscreenAPI")):(A=function(){for(var t,e=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenchange"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitfullscreenchange"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitfullscreenchange"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozfullscreenchange"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","MSFullscreenChange"]],a=0,n=e.length,s={};a<n;a++)if((t=e[a])&&t[1]in r){for(a=0;a<t.length;a++)s[e[0][a]]=t[a];return s}return!1}(),E.setItem("amst_fullscreenAPI",JSON.stringify(A))),E&&null!=E.getItem("amst_transitionPrefix")&&null!=E.getItem("amst_transformPrefix"))k=E.getItem("amst_transitionPrefix"),x=E.getItem("amst_transformPrefix");else{var C=function(t){for(var e=r.createElement("div"),a="",n=0;n<t.length;++n){if(void 0!==e.style[t[n]]){a=t[n];break}a=null}return a};k=C(["transition","msTransition","MozTransition","WebkitTransition","OTransition"]),x=C(["transform","msTransform","MozTransform","WebkitTransform","OTransform"]),E.setItem("amst_transitionPrefix",k),E.setItem("amst_transformPrefix",x)}var P="unknown";if(E&&E.getItem("amst_pointerType"))P=E.getItem("amst_pointerType");else{var M=function(t){P=t.pointerType?t.pointerType:"mouse",B()},I=function(){P="touch",B()},B=function(){E.setItem("amst_pointerType",P),o.removeEventListener(p,M),o.removeEventListener("touchstart",I),S.players.length>0&&S.players.forEach((function(t){return t.container.dispatchEvent(new CustomEvent("pointerDetected"))}))};o.addEventListener(p,M,!1)}var F=!1;E&&E.getItem("amst_supportPassiveEvents")?F=E.getItem("amst_supportPassiveEvents"):r.createElement("div").addEventListener("test",(function(){}),{get passive(){return F=!0,E.setItem("amst_supportPassiveEvents",F),!1}});var S=function(){function a(n,v){var h=this;e(this,a);var _=["autoplay","loop","muted","playsinline"],b=_.concat(["crossorigin","poster","preload","src"]);this.params=n.getAttributeNames().reduce((function(t,e){return b.includes(e)&&(t[e]=!!_.includes(e)||n.getAttribute(e)),t}),{}),this.params.muted&&(this.params.volume=0,delete this.params.muted),parseInt(n.getAttribute("width"))>0&&parseInt(n.getAttribute("height"))>0&&(this.params.format=parseInt(n.getAttribute("width"))/parseInt(n.getAttribute("height"))),b=b.filter((function(t){return"muted"!=t})).concat(["download","duration","format","fullscreen","hideControlsDelay","next","previous","skipTime","thumbnails","videoVolumeOrientation","volume","volumeButton","volumeForced","volumeGroup","railMinWidthForNormalUI"]),v&&(v=Object.keys(v).filter((function(t){return b.includes(t)})).reduce((function(t,e){return t[e]=v[e],t}),{})),v&&(this.params=H(this.params,v)),this.params=H(a.defaultOptions,this.params);var g=r.createElement("div"),y="horizontal"==this.params.videoVolumeOrientation?"horizontal":"vertical",w=F;g.classList.add("amst__wrapper"),g.classList.add("amst__video"),g.innerHTML=function(t){var e="",a="";f||(a='\n      <div class="amst__volume-slider" aria-label="'.concat(t.volumeSliderLabel,'" aria-valuemin="0" aria-valuemax="100" aria-valuenow="100" aria-valuetext="100%" role="slider" aria-orientation="').concat(t.videoVolumeOrientation,'" tabindex="0" title="').concat(t.volumeHelpLabel,'">\n        <span class="amst__offscreen">').concat(t.volumeHelpLabel,'</span>\n        <div class="amst__volume-total">\n          <div class="amst__volume-current" style="height: 100%;"></div>'),"horizontal"!=t.videoVolumeOrientation&&(a+='<div class="amst__volume-handle" style="bottom: 100%; margin-bottom: -3px;"></div>'),a+="</div></div>");e='\n    <div class="amst__button amst__volumebutton">\n      <button type="button" tabindex="0"></button>',"horizontal"!=t.videoVolumeOrientation?e+=a+"</div>":e+="</div>"+a;var n='\n    <span class="amst__offscreen">'.concat(t.appLabel,'</span>\n    <div class="amst__container" tabindex="0" role="application" aria-label="').concat(t.appLabel,'">\n      <div class="amst__mediaelement">\n        <video></video>\n      </div>\n    <div class="amst__layers">\n      <div class="amst__layer-poster">\n        <canvas></canvas>\n      </div>\n      <div class="amst__layer-loading">\n        <div class="amst__loading">\n          <span class="amst__svg"></span>\n        </div>\n      </div>\n      <div class="amst__layer-play">\n        <div class="amst__svg" role="button" tabindex="0" aria-label="').concat(t.playLabel,'" aria-pressed="false"></div>\n      </div>\n      <div class="amst__layer-seeking-touch">\n        <div class="amst__seeking-touch-cache"></div>\n        <span class="amst__time amst__seeking-touch">\n          <span></span>\n        </span>\n      </div>\n    </div>\n    <div class="amst__controls">\n      <div class="amst__button amst__previous">\n        <button type="button" title="').concat(t.previous.label,'" aria-label="').concat(t.previous.label,'" tabindex="0"></button>\n      </div>\n      <div class="amst__button amst__playpause">\n        <button type="button" title="').concat(t.playLabel,'" aria-label="').concat(t.playLabel,'" tabindex="0"></button>\n      </div>\n      <div class="amst__button amst__next">\n        <button type="button" title="').concat(t.next.label,'" aria-label="').concat(t.next.label,'" tabindex="0"></button>\n      </div>\n      <div class="amst__time" role="timer" aria-live="off">\n        <span class="amst__currenttime">00:00</span>\n      </div>\n      <div class="amst__rail">\n        <span class="amst__slider" role="slider" tabindex="0">\n          <span class="amst__buffering-bar"></span>\n          <canvas class="amst__loaded-bar"></canvas>\n          <span class="amst__currenttime-bar"></span>\n          <span class="amst__handle"><span></span></span>\n          <span class="amst__cursor"><span></span></span>\n          <span class="amst__seeking-wrapper">\n            <span class="amst__time amst__seeking">\n              <span>00:00</span>\n            </span>\n          </span>\n        </span>\n      </div>\n      <div class="amst__time amst__time-duration">\n        <span class="amst__duration">00:00</span>\n      </div>');n+=e,A&&(n+='        \n      <div class="amst__button amst__fullscreen">\n        <button type="button" title="'.concat(t.fullscreen.label,'" aria-label="').concat(t.fullscreen.label,'" tabindex="0"></button>\n      </div>'));return n+='\n      <div class="amst__button amst__download">\n        <button type="button" title="'.concat(t.download.label,'" aria-label="').concat(t.download.label,'" tabindex="0"></button>\n      </div>\n    </div>\n  ')}(this.params),n.parentNode.insertBefore(g,n),n.removeAttribute("src"),n.parentNode.removeChild(n);var T,L,C,M,I,B,S,W,X,q,R,D,V,U,Y,J=this,Q=j(g),K=G(g),Z=this.media=Q("video"),$=this.container=Q(".amst__container"),tt=Q(".amst__layer-poster"),et=Q(".amst__layer-poster canvas"),at=Q(".amst__layer-seeking-touch"),nt=Q(".amst__seeking-touch"),st=Q(".amst__layer-play"),it=Q(".amst__layer-loading"),ot=Q(".amst__controls"),rt=2*ot.css("padding-left"),lt=Q(".amst__playpause>button"),ut=Q(".amst__rail"),ct=Q(".amst__slider"),mt=Q(".amst__handle"),dt=Q(".amst__currenttime-bar"),pt=Q(".amst__seeking"),vt=Q(".amst__volumebutton button"),ft=Q(".amst__volume-slider"),ht=0,_t=0,bt=!1,gt=!1,yt=0;function Et(){var t=Z.play();t&&t.catch((function(){return wt()})),a.currentPlayer&&a.currentPlayer!=J&&a.currentPlayer.reset(),a.currentPlayer=J,$.focus(),lt.setAttributes({class:"amst__pause",title:J.params.pauseLabel,"aria-label":J.params.pauseLabel}),st.classList.add("amst__hidden"),bt||Tt({detail:{delayed:!0}})}function wt(){Z.pause(),lt.setAttributes({class:"",title:J.params.playLabel,"aria-label":J.params.playLabel}),st.classList.remove("amst__hidden"),Lt(),$.focus()}function Tt(t){var e=!!t&&t.detail.delayed,a=!!t&&t.detail.forced;Z.paused&&!a||(e||gt||bt?(q&&clearTimeout(q),q=setTimeout((function(){return Tt()}),J.params.hideControlsDelay)):($.focus(),ot.style[x]="translateX(-50%) scaleY(0)"))}function Lt(){q&&clearTimeout(q),ot.style[x]="",Z.paused||Tt({detail:{delayed:!0}})}function kt(){window.location=J.src.substring(0,J.src.lastIndexOf("/"))+"/index.php?file="+J.src.substring(J.src.lastIndexOf("/")+1)}function xt(t,e){var a=t.toLowerCase(),n=Q(".amst__".concat(a)),s=Q(".amst__".concat(a," > button"));!0===J.params[t].disabled?s.setAttribute("disabled",""):s.removeAttribute("disabled"),!0===J.params[t].hidden?n.classList.add("amst__hidden"):n.classList.remove("amst__hidden"),"volumeButton"==t&&ft&&(!0===J.params.volumeButton.disabled||!0===J.params.volumeButton.hidden?ft.classList.add("amst__hidden"):ft.classList.remove("amst__hidden")),s.setAttributes({title:e,"aria-label":e}),Ut()}function At(){xt("previous",J.params.previous.label)}function Ct(){xt("next",J.params.next.label)}function Pt(){!1===J.params.download.disabled&&!1===J.params.download.hidden?Q(".amst__download>button").on("click",kt,!1):Q(".amst__download>button").off("click",kt),xt("download",J.params.download.label)}function Mt(){U=J.params.fullscreen.label.enter,Y=J.params.fullscreen.label.exit,xt("fullscreen",a.currentFullScreenPlayer==J?Y:U)}function It(){xt("volumeButton",0==J.volume?J.params.volumeButton.label.unmute:J.params.volumeButton.label.mute)}function Bt(e){var n=e.detail;(n="object"===t(n)?n:{src:n}).volumeGroup<1&&(n.volumeGroup=J.params.volumeGroup),isNaN(n.volume)||!0!==n.volumeForced&&E.getItem("amst_volumegroup".concat(n.volumeGroup))?E.getItem("amst_volumegroup".concat(n.volumeGroup))&&(J.params.volume=E.getItem("amst_volumegroup".concat(n.volumeGroup))):(J.params.volume=n.volume,n.volumeGroup>0&&E.setItem("amst_volumegroup".concat(n.volumeGroup),n.volume));var s=["autoplay","crossorigin","download","duration","format","fullscreen","loop","next","playsinline","poster","preload","previous","src","skipTime","thumbnails","volumeButton","volumeGroup"];if(n=s.reduce((function(t,e){return s.includes(e)&&null!=n[e]&&(t[e]=n[e]),t}),{}),Z.getAttribute("src")){for(J.pause(),_t=0,ht=0,X=void 0;Z.attributes.length>0;)Z.removeAttribute(Z.attributes[0].name);["autoplay","crossorigin","loop","playsinline","thumbnails"].forEach((function(t){return J.params[t]=a.defaultOptions[t]})),$.classList.remove("amst__thumbnails","amst__loadedmetadata"),yt=0,R=void 0,pt.removeAttribute("style"),D=void 0,nt.removeAttribute("style");for(var o=0,r=Object.entries(n);o<r.length;o++){var l=i(r[o],2),u=l[0],c=l[1];J.params[u]=c}}if(J.params.thumbnails.src){var m=new Image,d=function t(e){if(m.removeEventListener("load",t),m.removeEventListener("error",t),"load"==e.type){$.classList.add("amst__thumbnails"),yt=m.naturalWidth/J.params.thumbnails.number;var a={width:"".concat(m.naturalWidth/J.params.thumbnails.number,"px"),height:"".concat(m.naturalHeight,"px"),"background-image":'url("'.concat(J.params.thumbnails.src,'")')};pt.css(a),nt.css(a)}else J.params.thumbnails.src=void 0};m.addEventListener("error",d,!1),m.addEventListener("load",d,!1),m.src=J.params.thumbnails.src}var p={src:J.params.src,preload:f?"none":J.params.preload};!0===J.params.playsinline&&(p.playsinline="",p["webkit-playsinline"]=""),!0===J.params.loop&&(p.loop=""),J.params.crossorigin&&(p.crossorigin=J.params.crossorigin),Z.setAttributes(p),J.volume=f&&J.params.volume>0?1:J.params.volume,V||(V=0==Z.volume?.1:Z.volume,f&&(V=1)),$.style.paddingBottom=1/J.params.format*100+"%",J.params.poster&&(tt.style.backgroundImage='url("'.concat(J.params.poster,'")'),tt.classList.remove("amst__hidden")),Q(".amst__duration").innerHTML=O(J.params.duration),Q(".amst__currenttime").innerHTML=O(0,J.params.duration>3600),At(),Ct(),Pt(),It(),A&&Mt(),!0===J.params.autoplay&&Et()}$.on("amstEvent__play",Et,!1),$.on("amstEvent__pause",wt,!1),$.on("amstEvent__",(function(){et.width=Z.videoWidth,et.height=Z.videoHeight,et.getContext("2d").drawImage(Z,0,0,et.width,et.height),tt.classList.remove("amst__hidden"),$.classList.remove("amst__loadedmetadata"),Z.src="",Z.preload="none",Z.src=J.params.src}),!1),$.on("amstEvent__hideControls",Tt,!1),$.on("amstEvent__showControls",Lt,!1),$.on("amstEvent__previousButton",At,!1),$.on("amstEvent__nextButton",Ct,!1),$.on("amstEvent__fullscreenButton",Mt,!1),$.on("amstEvent__downloadButton",Pt,!1),$.on("amstEvent__volumeButton",It,!1),$.on("amstEvent__src",Bt,!1),Bt({detail:this.params}),Z.on("mousemove",(function(){return Lt()}),!!w&&{passive:!0}).on("loadedmetadata",(function(){var t=h.params.format=Z.videoWidth/Z.videoHeight;a.currentFullScreenPlayer==J?o.dispatchEvent(new CustomEvent("optimizedResize")):$.style.paddingBottom=1/t*100+"%",$.classList.add("amst__loadedmetadata"),Z.currentTime=ht})).on("loadeddata",(function(){Z.currentTime=ht})).on("durationchange",(function(){h.params.duration=Z.duration,W="string"==typeof h.params.skipTime&&"%"==h.params.skipTime.slice(-1)?parseFloat(h.params.skipTime)*Z.duration/100:parseFloat(h.params.skipTime),Z.duration>=3600?$.classList.add("amst__long"):$.classList.remove("amst__long"),ct.setAttribute("aria-valuemax",Z.duration),Q(".amst__duration").innerHTML=O(Z.duration),Q(".amst__currenttime").innerHTML=O(ht,Z.duration>3600),Ut()})).on("progress",zt).on("timeupdate",(function(){if(!isNaN(Z.duration)){zt(),ct.setAttribute("aria-valuenow",Z.currentTime);var t=Math.floor(Z.currentTime);if(ht!=t){var e=O(ht=t,Z.duration>3600);Q(".amst__currenttime").innerHTML=e,ct.setAttribute("aria-valuetext",e)}(0==_t||Math.abs(Z.currentTime-_t)>.5)&&(cancelAnimationFrame(S),Wt()),_t=Z.currentTime}})).on("ended",(function(){Z.currentTime=0,h.pause()})).on("pause",(function(){return cancelAnimationFrame(S)})).on("playing",(function(){_t=0,tt.classList.add("amst__hidden")})).on("seeked",(function(){0==ht&&h.paused&&(et.width=0,et.height=0,tt.classList.remove("amst__hidden"))})).on("play playing seeked canplay",(function(){gt=!1,$.classList.remove("amst__buffering")})).on("seeking waiting loadeddata",(function(){gt=!0,$.classList.add("amst__buffering")}));var Ft=Q(".amst__loaded-bar"),St=Ft.offsetHeight,Ot=Ft.getContext("2d");function zt(){if(!function(t,e){if(!t||!e||t.length!=e.length)return!1;for(var a=0;a<t.length;a++)if(t.start(a)!=e.start(a)||t.end(a)!=e.end(a))return a=t.length,!1;return!0}(Z.buffered,X)){Ot.clearRect(0,0,Ft.width,Ft.height);for(var t=Ft.width/Z.duration,e=0;e<Z.buffered.length;e++){var a=Z.buffered.start(e)*t,n=Z.buffered.end(e)*t-a;new z(Ot,St,a,n)}X=Z.buffered}}Ft.height=St,Ot.fillStyle=Ft.css("color");var Nt=.5*mt.offsetWidth;function Wt(){var t,e,a,n,i=Z.paused&&!Z.seeking?"all .15s ease-in":"none",o=Z.currentTime,r=Z.duration,l=isNaN(r)?0:(o/r).toFixed(4),u=l*M-Nt;(u=Math.max(u,0),u=Math.min(u,M-2*Nt)+"px",Z.paused)?(dt.css((s(t={},k,i),s(t,x,"scaleX(".concat(l,")")),t)),mt.css((s(e={},k,i),s(e,x,"translateX(".concat(u,")")),e))):(dt.css((s(a={},k,i),s(a,x,"scaleX(".concat(l,")")),a)),mt.css((s(n={},k,i),s(n,x,"translateX(".concat(u,")")),n)),S=requestAnimationFrame(Wt))}function Ht(t){var e=((t.changedTouches?t.changedTouches[0].clientX:t.clientX)-C)/M;Z.currentTime=e*Z.duration}function jt(t){J.paused||bt||Tt({detail:{delayed:!0}}),Ht(t),ut.off(p,Ht),ut.off(d+" "+c,jt)}if(K([Z,it,at,st]).on("touchstart",(function(t){var e=Q(t.target),a=(new Date).getTime(),n=800,i=Z.duration?Z.currentTime/Z.duration:void 0,o=t.changedTouches[0].pageX,r=t.changedTouches[0].pageY,l=0,u=0,c=0,m=void 0,d=!1;function p(t){if(Z.duration&&!(J.paused&&c<-5)){if(t.preventDefault(),l=t.changedTouches[0].pageX-o,u=t.changedTouches[0].pageY-r,Math.abs(l)>Math.abs(u)?c++:c--,c>=5){m=Math.min(Math.max(i+l/T,0),.999),D||(D=nt.offsetWidth);var e=Math.min(Math.max(m*T-.5*D,0),T-D)+"px",a=s({},x,"translateX(".concat(e,")"));J.params.thumbnails.src&&(a.backgroundPosition=-Math.floor(100*m)*yt+"px 0"),nt.css(a),Q(".amst__seeking-touch-cache").style[x]="scaleX(".concat(m,")"),Q(".amst__seeking-touch > span").innerHTML=O(Z.duration*m,Z.duration>3600),5==c&&(at.classList.add("amst__show"),Tt({detail:{delayed:!1,forced:!0}}))}-5==c&&(d=!0,u<0?Lt():Tt())}}e.on("touchend",(function t(){null!=m?(Z.currentTime=Z.duration*m,at.classList.remove("amst__show"),Lt()):d||n>(new Date).getTime()-a&&J.togglePlayPause();e.off("touchend",t);e.off("touchmove",p)}),!!w&&{passive:!0}),e.on("touchmove",p,!!w&&{passive:!1})}),!!w&&{passive:!1}),K([Z,it]).on("click",(function(){return h.pause()}),!1),$.on("touchstart mousedown",(function(){$.classList.remove("amst__keyboard-active")}),!!w&&{passive:!0}),Q(".amst__playpause").on("click",(function(){return h.togglePlayPause()})),st.on("click",(function(){return h.play()})),ot.on(u,(function(t){if("touch"==l||t.pointerType&&"touch"==t.pointerType)return!1;Lt(),bt=!0})).on(c,(function(t){if("touch"==l||t.pointerType&&"touch"==t.pointerType)return!1;bt=!1,Tt({detail:{delayed:!0}})})),ut.on(m,(function(){if(isNaN(Z.duration))return!1;ut.on(p,Ht,!!w&&{passive:!0}),ut.on(d+" "+c,jt,!1)}),!!w&&{passive:!0}),N(p,"optimizedPointerMove",ct),ct.on("optimizedPointerMove",(function(t){if("touch"==l||t.pointerType&&"touch"==t.pointerType||isNaN(Z.duration))return!1;R||(R=pt.offsetWidth);var e=t.detail.clientX-C,a=e/M,n=-Math.floor(100*a)*yt+"px",s=.5*R-6;J.params.thumbnails.src&&(pt.style.backgroundPosition=n+" 0"),Q(".amst__cursor").style[x]="translateX(".concat(e,"px)"),e=Math.max(e,s),e=Math.min(e,M-s),Q(".amst__seeking-wrapper").style[x]="translateX(".concat(e,"px)"),Q(".amst__seeking > span").innerHTML=O(a*Z.duration,Z.duration>3600)})),Z.on("volumechange",(function(){if(!f){var t=parseInt(100*Z.volume);ft.setAttributes({"aria-valuenow":t,"aria-valuetext":t+"%"}),"horizontal"==y?Q(".amst__volume-current").style.width=t+"%":Q(".amst__volume-handle").style.bottom=t+"%"}0==Z.volume?(Z.muted=!0,vt.setAttributes({title:J.params.volumeButton.label.unmute,"aria-label":J.params.volumeButton.label.unmute,class:"amst__unmute"})):(Z.muted=!1,V=Z.volume,vt.classList.contains("amst__unmute")&&(vt.removeAttribute("class"),vt.setAttributes({title:J.params.volumeButton.label.mute,"aria-label":J.params.volumeButton.label.mute}))),E&&J.params.volumeGroup>0&&E.setItem("amst_volumegroup".concat(J.params.volumeGroup),J.volume),J.params.volume=J.volume,J.params.volumeGroup>0&&a.players.length>1&&a.players.forEach((function(t){t!=J&&t.params.volumeGroup==J.params.volumeGroup&&t.volume!=J.volume&&(t.volume=J.volume)}))})),vt.on("click",(function(){Z.muted?(Z.volume=V,Z.muted=!1):(Z.volume=0,Z.muted=!0)})),!f){ft.on(m,(function(){ft.on(p,Gt).on(c,Xt).on(d,Gt).on(d,Xt)}));var Gt=function(t){var e;"horizontal"==y?(e=Math.max(0,t.clientX-L.left),e=(e/=L.width)>.96?1:e):(ft.style.cursor="ns-resize",e=L.height-t.clientY+L.top,e=Math.max(0,Math.min(e,100))/100),J.volume=e},Xt=function t(){ft.off(p,Gt).off(c,t).off(d,Gt).off(d,t),"vertical"==y&&(ft.style.cursor="")};$.on("keydown",(function(t){switch($.classList.add("amst__keyboard-active"),Lt(),[37,38,39,40,77].includes(t.which)&&t.preventDefault(),t.which>36&&t.which<41&&(38!=t.which&&40!=t.which||r.activeElement==ft||("vertical"==y?(ft.on("transitionend",(function t(){this.removeEventListener("transitionend",t),this.focus()})),vt.focus()):ft.focus()),37!=t.which&&39!=t.which||r.activeElement==ct||ct.focus()),t.which){case 77:!0!==J.params.volumeButton.disabled&&!0!==J.params.volumeButton.hidden&&(vt.dispatchEvent(new MouseEvent("click")),vt.focus());break;case 40:!0!==J.params.volumeButton.disabled&&!0!==J.params.volumeButton.hidden&&(J.volume=Math.max(0,J.volume-.05));break;case 38:!0!==J.params.volumeButton.disabled&&!0!==J.params.volumeButton.hidden&&(J.volume=Math.min(1,J.volume+.05));break;case 37:J.currentTime=Math.max(0,J.currentTime-W);break;case 39:J.currentTime=Math.min(J.duration,J.currentTime+W);break;case 32:if(r.activeElement==lt)return;"BUTTON"!=r.activeElement.nodeName&&(t.preventDefault(),J.togglePlayPause())}}),!1)}if(A){var qt=0,Rt=0,Dt=Q(".amst__fullscreen>button");Dt.on("click",(function(){null!==r[A.fullscreenElement]?r[A.exitFullscreen]():(qt=o.pageXOffset,Rt=o.pageYOffset,g[A.requestFullscreen](),a.currentFullScreenPlayer=J)})),r.addEventListener(A.fullscreenchange,(function(){r[A.fullscreenElement]==g?(o.addEventListener("optimizedResize",Vt),g.classList.add("amst__isfullscreen"),$.classList.add("amst__notransition"),Dt.setAttributes({title:Y,"aria-label":Y,class:" amst__unfullscreen"}),Vt()):a.currentFullScreenPlayer==J&&(o.removeEventListener("optimizedResize",Vt),$.setAttribute("style","padding-bottom:".concat(1/J.params.format*100,"%")),g.classList.remove("amst__isfullscreen"),Dt.setAttributes({title:U,"aria-label":U,class:""}),setTimeout((function(){o.scroll(qt,Rt),setTimeout((function(){$.classList.remove("amst__notransition")}),50)}),50),a.currentFullScreenPlayer=void 0)}),!1);var Vt=function(){o.innerWidth/o.innerHeight>J.params.format?$.css({width:o.innerHeight*J.params.format+"px",height:"100%",paddingBottom:0}):$.css({width:"100%",height:"auto",paddingBottom:1/J.params.format*100+"%"}),Yt()}}function Ut(){B&&clearTimeout(B),B=setTimeout((function(){I=0,K(".amst__controls>div:not(.amst__rail):not(.amst__hidden):not(.amst__time-duration)").forEach((function(t){t.classList.contains("amst__time")?I+=2*t.offsetWidth:I+=t.offsetWidth})),Yt()}),1)}function Yt(){(T=$.offsetWidth)-rt-I<a.defaultOptions.railMinWidthForNormalUI?$.classList.add("amst__compact"):$.classList.remove("amst__compact");var t=ct.getBoundingClientRect();if(C=t.left,M=t.width,Wt(),!f){var e=function t(e){L=Q(".amst__volume-total").getBoundingClientRect(),e&&e.target==$&&$.off("transitionend",t)};$.on("transitionend",e,!1),e()}}o.addEventListener("optimizedResize",Yt),o.addEventListener("optimizedScroll",Yt),v&&"function"==typeof v.oninit&&setTimeout((function(){v.oninit(J)}),1),"unknown"==P?$.addEventListener("pointerDetected",(function t(){$.removeEventListener("pointerDetected",t),"touch"!=P&&$.classList.add("amst__no-touch")}),!1):"touch"!=P&&$.classList.add("amst__no-touch"),a.players.push(this)}return n(a,null,[{key:"options",value:function(t){0==a.players.length&&(a.defaultOptions=H(a.defaultOptions,t))}}]),n(a,[{key:"pause",value:function(){this.container.dispatchEvent(new CustomEvent("amstEvent__pause"))}},{key:"play",value:function(){this.container.dispatchEvent(new CustomEvent("amstEvent__play"))}},{key:"reset",value:function(){this.pause(),this.container.dispatchEvent(new CustomEvent("amstEvent__reset"))}},{key:"togglePlayPause",value:function(){this.paused?this.play():this.pause()}},{key:"hideControls",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.container.dispatchEvent(new CustomEvent("amstEvent__hideControls",{detail:{delayed:t,forced:e}}))}},{key:"showControls",value:function(){this.container.dispatchEvent(new CustomEvent("amstEvent__showControls"))}},{key:"previous",value:function(t){W(t)&&(this.params=H(this.params,{previous:t}),this.container.dispatchEvent(new CustomEvent("amstEvent__previousButton")))}},{key:"next",value:function(t){W(t)&&(this.params=H(this.params,{next:t}),this.container.dispatchEvent(new CustomEvent("amstEvent__nextButton")))}},{key:"fullscreen",value:function(t){W(t)&&(this.params=H(this.params,{fullscreen:t}),this.container.dispatchEvent(new CustomEvent("amstEvent__fullscreenButton")))}},{key:"download",value:function(t){W(t)&&(this.params=H(this.params,{download:t}),this.container.dispatchEvent(new CustomEvent("amstEvent__downloadButton")))}},{key:"volumeButton",value:function(t){W(t)&&(this.params=H(this.params,{volumeButton:t}),this.container.dispatchEvent(new CustomEvent("amstEvent__volumeButton")))}},{key:"src",set:function(t){this.container.dispatchEvent(new CustomEvent("amstEvent__src",{detail:t}))},get:function(){return this.media.getAttribute("src")}},{key:"paused",get:function(){return this.media.paused}},{key:"duration",get:function(){return this.media.duration}},{key:"currentTime",set:function(t){this.media.duration&&t>=0&&t<=this.media.duration&&(this.media.currentTime=t)},get:function(){return this.media.currentTime}},{key:"volume",set:function(t){this.media.volume=t},get:function(){return this.media.volume}}]),a}();function O(t,e){t=Math.round(t);var a=Math.floor(t/3600),n=Math.floor((t-3600*a)/60),s=Math.round(t%60);return(a=a>9?a+":":a>0?"0"+a+":":e?"00:":"")+(n=n>9?n:"0"+n)+":"+(s=s>9?s:"0"+s)}S.currentPlayer=void 0,S.players=[],S.defaultOptions={autoplay:!1,crossorigin:"anonymous",download:{label:"Télécharger",disabled:!1,hidden:!1},duration:120,format:16/9,fullscreen:{label:{enter:"Plein écran",exit:"Quitter le plein écran"},disabled:!1,hidden:!1},loop:!1,next:{label:"Suivant",disabled:!0,hidden:!0},playsinline:!0,poster:void 0,preload:"none",previous:{label:"Précédent",disabled:!0,hidden:!0},skipTime:"1%",thumbnails:{src:void 0,number:100},volume:.8,volumeButton:{label:{mute:"Désactiver le son",unmute:"Activer le son"},disabled:!1,hidden:!1},volumeGroup:0,hideControlsDelay:5e3,videoVolumeOrientation:"vertical",railMinWidthForNormalUI:600,appLabel:"Lecteur Vidéo",pauseLabel:"Pause",playLabel:"Lecture",volumeHelpLabel:"Utilisez les flèches Haut/Bas du clavier pour augmenter ou diminuer le volume.",volumeSliderLabel:"Potentiomètre de volume"};var z=function t(a,n,s,i){e(this,t);a.beginPath(),a.moveTo(s+2,0),a.lineTo(s+i-2,0),a.quadraticCurveTo(s+i,0,s+i,2),a.lineTo(s+i,0+n-2),a.quadraticCurveTo(s+i,0+n,s+i-2,0+n),a.lineTo(s+2,0+n),a.quadraticCurveTo(s,0+n,s,0+n-2),a.lineTo(s,2),a.quadraticCurveTo(s,0,s+2,0),a.closePath(),a.fill()},N=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o,n=!1,s=function(t){n||(n=!0,requestAnimationFrame((function(){a.dispatchEvent(new CustomEvent(e,{detail:t})),n=!1})))};a.addEventListener(t,s)};function W(e){return e&&"object"===t(e)&&!Array.isArray(e)}function H(t,e){var a=Object.assign({},t);return W(t)&&W(e)&&Object.keys(e).forEach((function(n){W(e[n])&&n in t?a[n]=H(t[n],e[n]):Object.assign(a,s({},n,e[n]))})),a}N("resize","optimizedResize"),N("scroll","optimizedScroll");var j=function(t){return function(e){var a="string"==typeof e?t.querySelector(e):e;return a&&(a.css=function(t){if("string"==typeof t){var e=o.getComputedStyle(a,null).getPropertyValue(t);return isNaN(parseFloat(e))?e:parseFloat(e)}return Object.assign(a.style,t),a},a.setAttributes=function(t){Object.keys(t).forEach((function(e){return a.setAttribute(e,t[e])}))},a.on=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t.split(" ").forEach((function(t){return a.addEventListener(t,e,n)})),a},a.off=function(t,e){return t.split(" ").forEach((function(t){return a.removeEventListener(t,e)})),a}),a}},G=function(t){return function(e){var a=Array.isArray(e)?e:Array.from(t.querySelectorAll(e));return a.css=function(t){if("string"==typeof t){var e=window.getComputedStyle(a[0],null).getPropertyValue(t);return isNaN(parseFloat(e))?e:parseFloat(e)}return a.forEach((function(e){Object.assign(e.style,t)})),a},a.on=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a.forEach((function(a){t.split(" ").forEach((function(t){return a.addEventListener(t,e,n)}))})),a},a.off=function(t,e){return a.forEach((function(a){t.split(" ").forEach((function(t){return a.removeEventListener(t,e)}))})),a},a.length?a:null}};return S}();
