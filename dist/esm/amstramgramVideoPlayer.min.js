const e=window,t=document,a=e.PointerEvent?"pointer":e.TouchEvent?"touch":"mouse",s="touch"==a?"none":a+"enter",n="touch"==a?"none":a+"leave",i="touch"==a?"touchstart":a+"down",o="touch"==a?"touchend":a+"up",r=a+"move",l=e.navigator.userAgent.toLowerCase(),u=/ipad|iphone|ipod/i.test(l)&&!e.MSStream||/android/i.test(l);if("function"!=typeof Object.assign||!Array.from||!Array.prototype.includes||"function"!=typeof window.CustomEvent){const e=t.getElementsByTagName("script"),a=e[e.length-1].src.split("?")[0].split("/").slice(0,-1).join("/")+"/",s=t.createElement("script");s.async="false",s.src=a+"amstramgramVideoPlayerPolyfill.min.js",t.head.appendChild(s)}null==Element.prototype.getAttributeNames&&(Element.prototype.getAttributeNames=function(){for(var e=this.attributes,t=e.length,a=new Array(t),s=0;s<t;s++)a[s]=e[s].name;return a});const m=function(){try{let t="__storage_test__";return e.sessionStorage.setItem(t,t),e.sessionStorage.removeItem(t),e.sessionStorage}catch(e){return!1}}();let d,c;if(m&&m.getItem("amst_timeWidth"))d=m.getItem("amst_timeWidth"),c=m.getItem("amst_longTimeWidth");else{const e=t.createElement("div"),a=t.createElement("div");e.classList.add("amst__measureTime"),e.innerHTML="<span>00:00<span>",a.classList.add("amst__measureTime"),a.innerHTML="<span>00:00:00<span>",t.body.appendChild(e),t.body.appendChild(a),d=e.offsetWidth+2,c=a.offsetWidth+2,t.body.removeChild(e),t.body.removeChild(a),m&&(m.setItem("amst_timeWidth",d),m.setItem("amst_longTimeWidth",c))}const p=t.createElement("style");p.appendChild(t.createTextNode("")),t.head.appendChild(p),p.sheet.insertRule(`.amst__time>span{width:${d}px;`,0),p.sheet.insertRule(`.amst__long .amst__time>span{width:${c}px;`,0);let v,h,_=!1;if(m&&null!=m.getItem("amst_fullscreenAPI")?_=JSON.parse(m.getItem("amst_fullscreenAPI")):(_=function(){let e,a=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenchange"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitfullscreenchange"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitfullscreenchange"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozfullscreenchange"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","MSFullscreenChange"]],s=0,n=a.length,i={};for(;s<n;s++)if((e=a[s])&&e[1]in t){for(s=0;s<e.length;s++)i[a[0][s]]=e[s];return i}return!1}(),m.setItem("amst_fullscreenAPI",JSON.stringify(_))),m&&null!=m.getItem("amst_transitionPrefix")&&null!=m.getItem("amst_transformPrefix"))v=m.getItem("amst_transitionPrefix"),h=m.getItem("amst_transformPrefix");else{let e=function(e){let a=t.createElement("div"),s="";for(let t=0;t<e.length;++t){if(void 0!==a.style[e[t]]){s=e[t];break}s=null}return s};v=e(["transition","msTransition","MozTransition","WebkitTransition","OTransition"]),h=e(["transform","msTransform","MozTransform","WebkitTransform","OTransform"]),m.setItem("amst_transitionPrefix",v),m.setItem("amst_transformPrefix",h)}let f="unknown";if(m&&m.getItem("amst_pointerType"))f=m.getItem("amst_pointerType");else{const t=function(e){f=e.pointerType?e.pointerType:"mouse",s()},a=function(){f="touch",s()},s=function(){m.setItem("amst_pointerType",f),e.removeEventListener(r,t),e.removeEventListener("touchstart",a),g.players.length>0&&g.players.forEach(e=>e.container.dispatchEvent(new CustomEvent("pointerDetected")))};e.addEventListener(r,t,!1)}let b=!1;m&&m.getItem("amst_supportPassiveEvents")?b=m.getItem("amst_supportPassiveEvents"):t.createElement("div").addEventListener("test",()=>{},{get passive(){return b=!0,m.setItem("amst_supportPassiveEvents",b),!1}});class g{static options(e){0==g.players.length&&(g.defaultOptions=L(g.defaultOptions,e))}constructor(l,d){const c=["autoplay","loop","muted","playsinline"];let p=c.concat(["crossorigin","poster","preload","src"]);this.params=l.getAttributeNames().reduce((e,t)=>(p.includes(t)&&(e[t]=!!c.includes(t)||l.getAttribute(t)),e),{}),this.params.muted&&(this.params.volume=0,delete this.params.muted),parseInt(l.getAttribute("width"))>0&&parseInt(l.getAttribute("height"))>0&&(this.params.format=parseInt(l.getAttribute("width"))/parseInt(l.getAttribute("height"))),p=p.filter(e=>"muted"!=e).concat(["download","duration","format","fullscreen","hideControlsDelay","next","previous","skipTime","thumbnails","videoVolumeOrientation","volume","volumeButton","volumeForced","volumeGroup","railMinWidthForNormalUI"]),d&&(d=Object.keys(d).filter(e=>p.includes(e)).reduce((e,t)=>(e[t]=d[t],e),{})),d&&(this.params=L(this.params,d)),this.params=L(g.defaultOptions,this.params);const T=t.createElement("div"),A="horizontal"==this.params.videoVolumeOrientation?"horizontal":"vertical",C=b;T.classList.add("amst__wrapper"),T.classList.add("amst__video"),T.innerHTML=function(e){let t="",a="";u||(a=`\n      <div class="amst__volume-slider" aria-label="${e.volumeSliderLabel}" aria-valuemin="0" aria-valuemax="100" aria-valuenow="100" aria-valuetext="100%" role="slider" aria-orientation="${e.videoVolumeOrientation}" tabindex="0" title="${e.volumeHelpLabel}">\n        <span class="amst__offscreen">${e.volumeHelpLabel}</span>\n        <div class="amst__volume-total">\n          <div class="amst__volume-current" style="height: 100%;"></div>`,"horizontal"!=e.videoVolumeOrientation&&(a+='<div class="amst__volume-handle" style="bottom: 100%; margin-bottom: -3px;"></div>'),a+="</div></div>");t='\n    <div class="amst__button amst__volumebutton">\n      <button type="button" tabindex="0"></button>',"horizontal"!=e.videoVolumeOrientation?t+=a+"</div>":t+="</div>"+a;let s=`\n    <span class="amst__offscreen">${e.appLabel}</span>\n    <div class="amst__container" tabindex="0" role="application" aria-label="${e.appLabel}">\n      <div class="amst__mediaelement">\n        <video></video>\n      </div>\n    <div class="amst__layers">\n      <div class="amst__layer-poster">\n        <canvas></canvas>\n      </div>\n      <div class="amst__layer-loading">\n        <div class="amst__loading">\n          <span class="amst__svg"></span>\n        </div>\n      </div>\n      <div class="amst__layer-play">\n        <div class="amst__svg" role="button" tabindex="0" aria-label="${e.playLabel}" aria-pressed="false"></div>\n      </div>\n      <div class="amst__layer-seeking-touch">\n        <div class="amst__seeking-touch-cache"></div>\n        <span class="amst__time amst__seeking-touch">\n          <span></span>\n        </span>\n      </div>\n    </div>\n    <div class="amst__controls">\n      <div class="amst__button amst__previous">\n        <button type="button" title="${e.previous.label}" aria-label="${e.previous.label}" tabindex="0"></button>\n      </div>\n      <div class="amst__button amst__playpause">\n        <button type="button" title="${e.playLabel}" aria-label="${e.playLabel}" tabindex="0"></button>\n      </div>\n      <div class="amst__button amst__next">\n        <button type="button" title="${e.next.label}" aria-label="${e.next.label}" tabindex="0"></button>\n      </div>\n      <div class="amst__time" role="timer" aria-live="off">\n        <span class="amst__currenttime">00:00</span>\n      </div>\n      <div class="amst__rail">\n        <span class="amst__slider" role="slider" tabindex="0">\n          <span class="amst__buffering-bar"></span>\n          <canvas class="amst__loaded-bar"></canvas>\n          <span class="amst__currenttime-bar"></span>\n          <span class="amst__handle"><span></span></span>\n          <span class="amst__cursor"><span></span></span>\n          <span class="amst__seeking-wrapper">\n            <span class="amst__time amst__seeking">\n              <span>00:00</span>\n            </span>\n          </span>\n        </span>\n      </div>\n      <div class="amst__time amst__time-duration">\n        <span class="amst__duration">00:00</span>\n      </div>`;s+=t,_&&(s+=`        \n      <div class="amst__button amst__fullscreen">\n        <button type="button" title="${e.fullscreen.label}" aria-label="${e.fullscreen.label}" tabindex="0"></button>\n      </div>`);return s+=`\n      <div class="amst__button amst__download">\n        <button type="button" title="${e.download.label}" aria-label="${e.download.label}" tabindex="0"></button>\n      </div>\n    </div>\n  `}(this.params),l.parentNode.insertBefore(T,l),l.removeAttribute("src"),l.parentNode.removeChild(l);const M=this,P=x(T),I=k(T),B=this.media=P("video"),$=this.container=P(".amst__container"),F=P(".amst__layer-poster"),O=P(".amst__layer-poster canvas"),z=P(".amst__layer-seeking-touch"),S=P(".amst__seeking-touch"),N=P(".amst__layer-play"),W=P(".amst__layer-loading"),H=P(".amst__controls"),G=2*H.css("padding-left"),X=P(".amst__playpause>button"),q=P(".amst__rail"),R=P(".amst__slider"),j=P(".amst__handle"),D=P(".amst__currenttime-bar"),V=P(".amst__seeking"),U=P(".amst__volumebutton button"),Y=P(".amst__volume-slider");let J,Q,K,Z,ee,te,ae,se,ne,ie,oe,re,le,ue,me,de=0,ce=0,pe=!1,ve=!1,he=0;function _e(){let e=B.play();e&&e.catch(()=>fe()),g.currentPlayer&&g.currentPlayer!=M&&g.currentPlayer.reset(),g.currentPlayer=M,$.focus(),X.setAttributes({class:"amst__pause",title:M.params.pauseLabel,"aria-label":M.params.pauseLabel}),N.classList.add("amst__hidden"),pe||be({detail:{delayed:!0}})}function fe(){B.pause(),X.setAttributes({class:"",title:M.params.playLabel,"aria-label":M.params.playLabel}),N.classList.remove("amst__hidden"),ge(),$.focus()}function be(e){let t=!!e&&e.detail.delayed,a=!!e&&e.detail.forced;B.paused&&!a||(t||ve||pe?(ie&&clearTimeout(ie),ie=setTimeout(()=>be(),M.params.hideControlsDelay)):($.focus(),H.style[h]="translateX(-50%) scaleY(0)"))}function ge(){ie&&clearTimeout(ie),H.style[h]="",B.paused||be({detail:{delayed:!0}})}function ye(){window.location=M.src.substring(0,M.src.lastIndexOf("/"))+"/index.php?file="+M.src.substring(M.src.lastIndexOf("/")+1)}function Ee(e,t){const a=e.toLowerCase(),s=P(`.amst__${a}`),n=P(`.amst__${a} > button`);!0===M.params[e].disabled?n.setAttribute("disabled",""):n.removeAttribute("disabled"),!0===M.params[e].hidden?s.classList.add("amst__hidden"):s.classList.remove("amst__hidden"),"volumeButton"==e&&Y&&(!0===M.params.volumeButton.disabled||!0===M.params.volumeButton.hidden?Y.classList.add("amst__hidden"):Y.classList.remove("amst__hidden")),n.setAttributes({title:t,"aria-label":t}),ze()}function we(){Ee("previous",M.params.previous.label)}function Te(){Ee("next",M.params.next.label)}function Le(){!1===M.params.download.disabled&&!1===M.params.download.hidden?P(".amst__download>button").on("click",ye,!1):P(".amst__download>button").off("click",ye),Ee("download",M.params.download.label)}function xe(){ue=M.params.fullscreen.label.enter,me=M.params.fullscreen.label.exit,Ee("fullscreen",g.currentFullScreenPlayer==M?me:ue)}function ke(){Ee("volumeButton",0==M.volume?M.params.volumeButton.label.unmute:M.params.volumeButton.label.mute)}function Ae(e){let t=e.detail;(t="object"==typeof t?t:{src:t}).volumeGroup<1&&(t.volumeGroup=M.params.volumeGroup),isNaN(t.volume)||!0!==t.volumeForced&&m.getItem(`amst_volumegroup${t.volumeGroup}`)?m.getItem(`amst_volumegroup${t.volumeGroup}`)&&(M.params.volume=m.getItem(`amst_volumegroup${t.volumeGroup}`)):(M.params.volume=t.volume,t.volumeGroup>0&&m.setItem(`amst_volumegroup${t.volumeGroup}`,t.volume));const a=["autoplay","crossorigin","download","duration","format","fullscreen","loop","next","playsinline","poster","preload","previous","src","skipTime","thumbnails","volumeButton","volumeGroup"];if(t=a.reduce((e,s)=>(a.includes(s)&&null!=t[s]&&(e[s]=t[s]),e),{}),B.getAttribute("src")){for(M.pause(),ce=0,de=0,ne=void 0;B.attributes.length>0;)B.removeAttribute(B.attributes[0].name);["autoplay","crossorigin","loop","playsinline","thumbnails"].forEach(e=>M.params[e]=g.defaultOptions[e]),$.classList.remove("amst__thumbnails","amst__loadedmetadata"),he=0,oe=void 0,V.removeAttribute("style"),re=void 0,S.removeAttribute("style");for(let[e,a]of Object.entries(t))M.params[e]=a}if(M.params.thumbnails.src){let e=new Image;const t=function(a){if(e.removeEventListener("load",t),e.removeEventListener("error",t),"load"==a.type){$.classList.add("amst__thumbnails"),he=e.naturalWidth/M.params.thumbnails.number;let t={width:`${e.naturalWidth/M.params.thumbnails.number}px`,height:`${e.naturalHeight}px`,"background-image":`url("${M.params.thumbnails.src}")`};V.css(t),S.css(t)}else M.params.thumbnails.src=void 0};e.addEventListener("error",t,!1),e.addEventListener("load",t,!1),e.src=M.params.thumbnails.src}let s={src:M.params.src,preload:u?"none":M.params.preload};!0===M.params.playsinline&&(s.playsinline="",s["webkit-playsinline"]=""),!0===M.params.loop&&(s.loop=""),M.params.crossorigin&&(s.crossorigin=M.params.crossorigin),B.setAttributes(s),M.volume=u&&M.params.volume>0?1:M.params.volume,le||(le=0==B.volume?.1:B.volume,u&&(le=1)),$.style.paddingBottom=1/M.params.format*100+"%",M.params.poster&&(F.style.backgroundImage=`url("${M.params.poster}")`,F.classList.remove("amst__hidden")),P(".amst__duration").innerHTML=y(M.params.duration),P(".amst__currenttime").innerHTML=y(0,M.params.duration>3600),we(),Te(),Le(),ke(),_&&xe(),!0===M.params.autoplay&&_e()}$.on("amstEvent__play",_e,!1),$.on("amstEvent__pause",fe,!1),$.on("amstEvent__",(function(){O.width=B.videoWidth,O.height=B.videoHeight,O.getContext("2d").drawImage(B,0,0,O.width,O.height),F.classList.remove("amst__hidden"),$.classList.remove("amst__loadedmetadata"),B.src="",B.preload="none",B.src=M.params.src}),!1),$.on("amstEvent__hideControls",be,!1),$.on("amstEvent__showControls",ge,!1),$.on("amstEvent__previousButton",we,!1),$.on("amstEvent__nextButton",Te,!1),$.on("amstEvent__fullscreenButton",xe,!1),$.on("amstEvent__downloadButton",Le,!1),$.on("amstEvent__volumeButton",ke,!1),$.on("amstEvent__src",Ae,!1),Ae({detail:this.params}),B.on("mousemove",()=>ge(),!!C&&{passive:!0}).on("loadedmetadata",()=>{let t=this.params.format=B.videoWidth/B.videoHeight;g.currentFullScreenPlayer==M?e.dispatchEvent(new CustomEvent("optimizedResize")):$.style.paddingBottom=1/t*100+"%",$.classList.add("amst__loadedmetadata"),B.currentTime=de}).on("loadeddata",()=>{B.currentTime=de}).on("durationchange",()=>{this.params.duration=B.duration,se="string"==typeof this.params.skipTime&&"%"==this.params.skipTime.slice(-1)?parseFloat(this.params.skipTime)*B.duration/100:parseFloat(this.params.skipTime),B.duration>=3600?$.classList.add("amst__long"):$.classList.remove("amst__long"),R.setAttribute("aria-valuemax",B.duration),P(".amst__duration").innerHTML=y(B.duration),P(".amst__currenttime").innerHTML=y(de,B.duration>3600),ze()}).on("progress",Ie).on("timeupdate",()=>{if(isNaN(B.duration))return;Ie(),R.setAttribute("aria-valuenow",B.currentTime);let e=Math.floor(B.currentTime);if(de!=e){let t=y(de=e,B.duration>3600);P(".amst__currenttime").innerHTML=t,R.setAttribute("aria-valuetext",t)}(0==ce||Math.abs(B.currentTime-ce)>.5)&&(cancelAnimationFrame(ae),$e()),ce=B.currentTime}).on("ended",()=>{B.currentTime=0,this.pause()}).on("pause",()=>cancelAnimationFrame(ae)).on("playing",()=>{ce=0,F.classList.add("amst__hidden")}).on("seeked",()=>{0==de&&this.paused&&(O.width=0,O.height=0,F.classList.remove("amst__hidden"))}).on("play playing seeked canplay",()=>{ve=!1,$.classList.remove("amst__buffering")}).on("seeking waiting loadeddata",()=>{ve=!0,$.classList.add("amst__buffering")});const Ce=P(".amst__loaded-bar"),Me=Ce.offsetHeight;let Pe=Ce.getContext("2d");function Ie(){if(!function(e,t){if(!e||!t||e.length!=t.length)return!1;for(let a=0;a<e.length;a++)if(e.start(a)!=t.start(a)||e.end(a)!=t.end(a))return a=e.length,!1;return!0}(B.buffered,ne)){Pe.clearRect(0,0,Ce.width,Ce.height);let e=Ce.width/B.duration;for(let t=0;t<B.buffered.length;t++){let a=B.buffered.start(t)*e,s=B.buffered.end(t)*e-a;new E(Pe,Me,a,s)}ne=B.buffered}}Ce.height=Me,Pe.fillStyle=Ce.css("color");let Be=.5*j.offsetWidth;function $e(){let e=B.paused&&!B.seeking?"all .15s ease-in":"none",t=B.currentTime,a=B.duration,s=isNaN(a)?0:(t/a).toFixed(4),n=s*Z-Be;n=Math.max(n,0),n=Math.min(n,Z-2*Be)+"px",B.paused?(D.css({[v]:e,[h]:`scaleX(${s})`}),j.css({[v]:e,[h]:`translateX(${n})`})):(D.css({[v]:e,[h]:`scaleX(${s})`}),j.css({[v]:e,[h]:`translateX(${n})`}),ae=requestAnimationFrame($e))}function Fe(e){let t=((e.changedTouches?e.changedTouches[0].clientX:e.clientX)-K)/Z;B.currentTime=t*B.duration}function Oe(e){M.paused||pe||be({detail:{delayed:!0}}),Fe(e),q.off(r,Fe),q.off(o+" "+n,Oe)}if(I([B,W,z,N]).on("touchstart",(function(e){const t=P(e.target),a=(new Date).getTime(),s=800,n=B.duration?B.currentTime/B.duration:void 0;let i=e.changedTouches[0].pageX,o=e.changedTouches[0].pageY,r=0,l=0,u=0,m=void 0,d=!1;function c(e){if(B.duration&&!(M.paused&&u<-5)){if(e.preventDefault(),r=e.changedTouches[0].pageX-i,l=e.changedTouches[0].pageY-o,Math.abs(r)>Math.abs(l)?u++:u--,u>=5){m=Math.min(Math.max(n+r/J,0),.999),re||(re=S.offsetWidth);const e=Math.min(Math.max(m*J-.5*re,0),J-re)+"px";let t={[h]:`translateX(${e})`};M.params.thumbnails.src&&(t.backgroundPosition=-Math.floor(100*m)*he+"px 0"),S.css(t),P(".amst__seeking-touch-cache").style[h]=`scaleX(${m})`,P(".amst__seeking-touch > span").innerHTML=y(B.duration*m,B.duration>3600),5==u&&(z.classList.add("amst__show"),be({detail:{delayed:!1,forced:!0}}))}-5==u&&(d=!0,l<0?ge():be())}}t.on("touchend",(function e(){null!=m?(B.currentTime=B.duration*m,z.classList.remove("amst__show"),ge()):d||s>(new Date).getTime()-a&&M.togglePlayPause();t.off("touchend",e);t.off("touchmove",c)}),!!C&&{passive:!0}),t.on("touchmove",c,!!C&&{passive:!1})}),!!C&&{passive:!1}),I([B,W]).on("click",()=>this.pause(),!1),$.on("touchstart mousedown",()=>{$.classList.remove("amst__keyboard-active")},!!C&&{passive:!0}),P(".amst__playpause").on("click",()=>this.togglePlayPause()),N.on("click",()=>this.play()),H.on(s,e=>{if("touch"==a||e.pointerType&&"touch"==e.pointerType)return!1;ge(),pe=!0}).on(n,e=>{if("touch"==a||e.pointerType&&"touch"==e.pointerType)return!1;pe=!1,be({detail:{delayed:!0}})}),q.on(i,()=>{if(isNaN(B.duration))return!1;q.on(r,Fe,!!C&&{passive:!0}),q.on(o+" "+n,Oe,!1)},!!C&&{passive:!0}),w(r,"optimizedPointerMove",R),R.on("optimizedPointerMove",e=>{if("touch"==a||e.pointerType&&"touch"==e.pointerType||isNaN(B.duration))return!1;oe||(oe=V.offsetWidth);let t=e.detail.clientX-K;const s=t/Z,n=-Math.floor(100*s)*he+"px",i=.5*oe-6;M.params.thumbnails.src&&(V.style.backgroundPosition=n+" 0"),P(".amst__cursor").style[h]=`translateX(${t}px)`,t=Math.max(t,i),t=Math.min(t,Z-i),P(".amst__seeking-wrapper").style[h]=`translateX(${t}px)`,P(".amst__seeking > span").innerHTML=y(s*B.duration,B.duration>3600)}),B.on("volumechange",()=>{if(!u){const e=parseInt(100*B.volume);Y.setAttributes({"aria-valuenow":e,"aria-valuetext":e+"%"}),"horizontal"==A?P(".amst__volume-current").style.width=e+"%":P(".amst__volume-handle").style.bottom=e+"%"}0==B.volume?(B.muted=!0,U.setAttributes({title:M.params.volumeButton.label.unmute,"aria-label":M.params.volumeButton.label.unmute,class:"amst__unmute"})):(B.muted=!1,le=B.volume,U.classList.contains("amst__unmute")&&(U.removeAttribute("class"),U.setAttributes({title:M.params.volumeButton.label.mute,"aria-label":M.params.volumeButton.label.mute}))),m&&M.params.volumeGroup>0&&m.setItem(`amst_volumegroup${M.params.volumeGroup}`,M.volume),M.params.volume=M.volume,M.params.volumeGroup>0&&g.players.length>1&&g.players.forEach(e=>{e!=M&&e.params.volumeGroup==M.params.volumeGroup&&e.volume!=M.volume&&(e.volume=M.volume)})}),U.on("click",()=>{B.muted?(B.volume=le,B.muted=!1):(B.volume=0,B.muted=!0)}),!u){Y.on(i,()=>{Y.on(r,e).on(n,a).on(o,e).on(o,a)});const e=function(e){let t;"horizontal"==A?(t=Math.max(0,e.clientX-Q.left),t=(t/=Q.width)>.96?1:t):(Y.style.cursor="ns-resize",t=Q.height-e.clientY+Q.top,t=Math.max(0,Math.min(t,100))/100),M.volume=t},a=function(){Y.off(r,e).off(n,a).off(o,e).off(o,a),"vertical"==A&&(Y.style.cursor="")};$.on("keydown",(function(e){switch($.classList.add("amst__keyboard-active"),ge(),[37,38,39,40,77].includes(e.which)&&e.preventDefault(),e.which>36&&e.which<41&&(38!=e.which&&40!=e.which||t.activeElement==Y||("vertical"==A?(Y.on("transitionend",(function e(){this.removeEventListener("transitionend",e),this.focus()})),U.focus()):Y.focus()),37!=e.which&&39!=e.which||t.activeElement==R||R.focus()),e.which){case 77:!0!==M.params.volumeButton.disabled&&!0!==M.params.volumeButton.hidden&&(U.dispatchEvent(new MouseEvent("click")),U.focus());break;case 40:!0!==M.params.volumeButton.disabled&&!0!==M.params.volumeButton.hidden&&(M.volume=Math.max(0,M.volume-.05));break;case 38:!0!==M.params.volumeButton.disabled&&!0!==M.params.volumeButton.hidden&&(M.volume=Math.min(1,M.volume+.05));break;case 37:M.currentTime=Math.max(0,M.currentTime-se);break;case 39:M.currentTime=Math.min(M.duration,M.currentTime+se);break;case 32:if(t.activeElement==X)return;"BUTTON"!=t.activeElement.nodeName&&(e.preventDefault(),M.togglePlayPause())}}),!1)}if(_){let a=0,s=0;const n=P(".amst__fullscreen>button");n.on("click",()=>{null!==t[_.fullscreenElement]?t[_.exitFullscreen]():(a=e.pageXOffset,s=e.pageYOffset,T[_.requestFullscreen](),g.currentFullScreenPlayer=M)}),t.addEventListener(_.fullscreenchange,(function(){t[_.fullscreenElement]==T?(e.addEventListener("optimizedResize",i),T.classList.add("amst__isfullscreen"),$.classList.add("amst__notransition"),n.setAttributes({title:me,"aria-label":me,class:" amst__unfullscreen"}),i()):g.currentFullScreenPlayer==M&&(e.removeEventListener("optimizedResize",i),$.setAttribute("style",`padding-bottom:${1/M.params.format*100}%`),T.classList.remove("amst__isfullscreen"),n.setAttributes({title:ue,"aria-label":ue,class:""}),setTimeout(()=>{e.scroll(a,s),setTimeout(()=>{$.classList.remove("amst__notransition")},50)},50),g.currentFullScreenPlayer=void 0)}),!1);const i=function(){e.innerWidth/e.innerHeight>M.params.format?$.css({width:e.innerHeight*M.params.format+"px",height:"100%",paddingBottom:0}):$.css({width:"100%",height:"auto",paddingBottom:1/M.params.format*100+"%"}),Se()}}function ze(){te&&clearTimeout(te),te=setTimeout((function(){ee=0,I(".amst__controls>div:not(.amst__rail):not(.amst__hidden):not(.amst__time-duration)").forEach(e=>{e.classList.contains("amst__time")?ee+=2*e.offsetWidth:ee+=e.offsetWidth}),Se()}),1)}function Se(){(J=$.offsetWidth)-G-ee<g.defaultOptions.railMinWidthForNormalUI?$.classList.add("amst__compact"):$.classList.remove("amst__compact");let e=R.getBoundingClientRect();if(K=e.left,Z=e.width,$e(),!u){const e=function(t){Q=P(".amst__volume-total").getBoundingClientRect(),t&&t.target==$&&$.off("transitionend",e)};$.on("transitionend",e,!1),e()}}e.addEventListener("optimizedResize",Se),e.addEventListener("optimizedScroll",Se),d&&"function"==typeof d.oninit&&setTimeout((function(){d.oninit(M)}),1),"unknown"==f?$.addEventListener("pointerDetected",(function e(){$.removeEventListener("pointerDetected",e),"touch"!=f&&$.classList.add("amst__no-touch")}),!1):"touch"!=f&&$.classList.add("amst__no-touch"),g.players.push(this)}set src(e){this.container.dispatchEvent(new CustomEvent("amstEvent__src",{detail:e}))}get src(){return this.media.getAttribute("src")}get paused(){return this.media.paused}get duration(){return this.media.duration}set currentTime(e){this.media.duration&&e>=0&&e<=this.media.duration&&(this.media.currentTime=e)}get currentTime(){return this.media.currentTime}set volume(e){this.media.volume=e}get volume(){return this.media.volume}pause(){this.container.dispatchEvent(new CustomEvent("amstEvent__pause"))}play(){this.container.dispatchEvent(new CustomEvent("amstEvent__play"))}reset(){this.pause(),this.container.dispatchEvent(new CustomEvent("amstEvent__reset"))}togglePlayPause(){this.paused?this.play():this.pause()}hideControls(e=!1,t=!1){this.container.dispatchEvent(new CustomEvent("amstEvent__hideControls",{detail:{delayed:e,forced:t}}))}showControls(){this.container.dispatchEvent(new CustomEvent("amstEvent__showControls"))}previous(e){T(e)&&(this.params=L(this.params,{previous:e}),this.container.dispatchEvent(new CustomEvent("amstEvent__previousButton")))}next(e){T(e)&&(this.params=L(this.params,{next:e}),this.container.dispatchEvent(new CustomEvent("amstEvent__nextButton")))}fullscreen(e){T(e)&&(this.params=L(this.params,{fullscreen:e}),this.container.dispatchEvent(new CustomEvent("amstEvent__fullscreenButton")))}download(e){T(e)&&(this.params=L(this.params,{download:e}),this.container.dispatchEvent(new CustomEvent("amstEvent__downloadButton")))}volumeButton(e){T(e)&&(this.params=L(this.params,{volumeButton:e}),this.container.dispatchEvent(new CustomEvent("amstEvent__volumeButton")))}}function y(e,t){e=Math.round(e);let a=Math.floor(e/3600),s=Math.floor((e-3600*a)/60),n=Math.round(e%60);return(a=a>9?a+":":a>0?"0"+a+":":t?"00:":"")+(s=s>9?s:"0"+s)+":"+(n=n>9?n:"0"+n)}g.currentPlayer=void 0,g.players=[],g.defaultOptions={autoplay:!1,crossorigin:"anonymous",download:{label:"Télécharger",disabled:!1,hidden:!1},duration:120,format:16/9,fullscreen:{label:{enter:"Plein écran",exit:"Quitter le plein écran"},disabled:!1,hidden:!1},loop:!1,next:{label:"Suivant",disabled:!0,hidden:!0},playsinline:!0,poster:void 0,preload:"none",previous:{label:"Précédent",disabled:!0,hidden:!0},skipTime:"1%",thumbnails:{src:void 0,number:100},volume:.8,volumeButton:{label:{mute:"Désactiver le son",unmute:"Activer le son"},disabled:!1,hidden:!1},volumeGroup:0,hideControlsDelay:5e3,videoVolumeOrientation:"vertical",railMinWidthForNormalUI:600,appLabel:"Lecteur Vidéo",pauseLabel:"Pause",playLabel:"Lecture",volumeHelpLabel:"Utilisez les flèches Haut/Bas du clavier pour augmenter ou diminuer le volume.",volumeSliderLabel:"Potentiomètre de volume"};class E{constructor(e,t,a,s){e.beginPath(),e.moveTo(a+2,0),e.lineTo(a+s-2,0),e.quadraticCurveTo(a+s,0,a+s,2),e.lineTo(a+s,0+t-2),e.quadraticCurveTo(a+s,0+t,a+s-2,0+t),e.lineTo(a+2,0+t),e.quadraticCurveTo(a,0+t,a,0+t-2),e.lineTo(a,2),e.quadraticCurveTo(a,0,a+2,0),e.closePath(),e.fill()}}let w=(t,a,s=e)=>{let n=!1;s.addEventListener(t,e=>{n||(n=!0,requestAnimationFrame(()=>{s.dispatchEvent(new CustomEvent(a,{detail:e})),n=!1}))})};function T(e){return e&&"object"==typeof e&&!Array.isArray(e)}function L(e,t){let a=Object.assign({},e);return T(e)&&T(t)&&Object.keys(t).forEach(s=>{T(t[s])&&s in e?a[s]=L(e[s],t[s]):Object.assign(a,{[s]:t[s]})}),a}w("resize","optimizedResize"),w("scroll","optimizedScroll");let x=t=>{return function(a){let s="string"==typeof a?t.querySelector(a):a;return s&&(s.css=t=>{if("string"==typeof t){let a=e.getComputedStyle(s,null).getPropertyValue(t);return isNaN(parseFloat(a))?a:parseFloat(a)}return Object.assign(s.style,t),s},s.setAttributes=e=>{Object.keys(e).forEach(t=>s.setAttribute(t,e[t]))},s.on=function(e,t,a=!1){return e.split(" ").forEach(e=>s.addEventListener(e,t,a)),s},s.off=function(e,t){return e.split(" ").forEach(e=>s.removeEventListener(e,t)),s}),s}},k=e=>{return t=>{let a=Array.isArray(t)?t:Array.from(e.querySelectorAll(t));return a.css=e=>{if("string"==typeof e){let t=window.getComputedStyle(a[0],null).getPropertyValue(e);return isNaN(parseFloat(t))?t:parseFloat(t)}return a.forEach(t=>{Object.assign(t.style,e)}),a},a.on=function(e,t,s=!1){return a.forEach(a=>{e.split(" ").forEach(e=>a.addEventListener(e,t,s))}),a},a.off=function(e,t){return a.forEach(a=>{e.split(" ").forEach(e=>a.removeEventListener(e,t))}),a},a.length?a:null}};export default g;
